!function(e){const t=["color:green;","color:blue;","color:black;"],s=e=>{const s=new Date,r=(""+s.getHours()).padStart(2,"0"),i=(""+s.getMinutes()).padStart(2,"0"),n=(""+s.getSeconds()).padStart(2,"0");console.log(`%c[${r}:${i}:${n}] %cRM%c::${e}`,...t)},r=(e,t)=>{if(!Array.isArray(e))return!1;const s=e.find(e=>e&&e.url===t);return void 0!==s&&s},i=(e,t,s="new")=>(e.push({url:t,state:s}),e[e.length-1]);function n(e,t,r=0){if(!Array.isArray(e)||0===e.length)return Promise.resolve();if(r>20)return s("Recursive load limit reached!"),Promise.resolve();const i=e[0];return i?new Promise((s,l)=>{t.call(this,i).then(()=>n.call(this,e.slice(1),t,r+1)).then(()=>s()).catch(e=>l(e))}):n.call(this,e.slice(1),t)}class l{loadScript(e){if(Array.isArray(e))return n.call(this,e,this.loadScript);const t=r(this.scripts,e),l=!1===t?i(this.scripts,e):t;return"fulfilled"===l.state?(s(`Script ${e} already had been loaded.`),Promise.resolve(l)):("pending"===l.state||(l.promise=new Promise((t,r)=>{l.state="pending",(e=>{const t=document.createElement("script");return new Promise((s,r)=>{t.onerror=()=>r(new Error("Failed to load script: "+e)),t.onload=()=>s(),document.head.appendChild(t),t.src=e})})(e).then(()=>{l.state="fulfilled",delete l.promise,s(`Script ${e} has been loaded.`),t(l)}).catch(e=>{l.state="rejected",delete l.promise,s(e.message||e),r(e)})})),l.promise)}loadCss(e){if(Array.isArray(e))return n.call(this,e,this.loadCss);const t=r(this.css,e),l=!1===t?i(this.css,e):t;return"fulfilled"===l.state?(s(`CSS ${e} already had been loaded.`),Promise.resolve(l)):("pending"===l.state||(l.promise=new Promise((t,r)=>{l.state="pending",(e=>{const t=document.createElement("link");return new Promise((s,r)=>{t.onerror=()=>r(new Error("Failed to load CSS: "+e)),t.onload=()=>s(),t.rel="stylesheet",t.type="text/css",document.head.appendChild(t),t.href=e})})(e).then(()=>{l.state="fulfilled",delete l.promise,s(`CSS ${e} has been loaded.`),t(l)}).catch(e=>{l.state="rejected",delete l.promise,s(e.message||e),r(e)})})),l.promise)}loadPlugin(e){return new Promise((t,s)=>{this.loadCss(e.css).then(()=>this.loadScript(e.js)).then(()=>t()).catch(e=>s(e))})}constructor(){this.css=[],this.scripts=[],s("Initializing Resource Manager..."),document.querySelectorAll("script").forEach(e=>{i(this.scripts,e.getAttribute("src"),"fulfilled")}),this.scripts.length&&s("Found JS scripts: "+this.scripts.length),document.querySelectorAll('link[type="text/css"]').forEach(e=>{i(this.css,e.getAttribute("href"),"fulfilled")}),0!==this.css.length&&s("Found CSS: "+this.css.length)}}document.addEventListener("DOMContentLoaded",()=>{e.RM&&e.RM instanceof l||(e.RM=new l)})}(window);