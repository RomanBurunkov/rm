!function(e){const t=["color:green;","color:blue;","color:black;"],s=e=>{const s=new Date,r=(""+s.getHours()).padStart(2,"0"),n=(""+s.getMinutes()).padStart(2,"0"),i=(""+s.getSeconds()).padStart(2,"0");console.log(`%c[${r}:${n}:${i}] %cRM%c::${e}`,...t)},r=(e,t)=>{if(!Array.isArray(e))return!1;const s=e.find(e=>e&&e.url===t);return void 0!==s&&s},n=(e,t,s="new")=>!!t&&(e.push({url:t,state:s}),e[e.length-1]),i=(e,t,s)=>{document.querySelectorAll(e).forEach(e=>{const i=e.getAttribute(t);if(!i)return;const o=r(s,i);o&&"rejected"!==o.state||n(s,i,"fulfilled")})};function o(e,t,r=0){if(!Array.isArray(e)||0===e.length)return Promise.resolve();if(r>20)return s("Recursive load limit reached!"),Promise.resolve();const n=e[0];return n?new Promise((s,i)=>{t.call(this,n).then(()=>o.call(this,e.slice(1),t,r+1)).then(()=>s()).catch(e=>i(e))}):o.call(this,e.slice(1),t)}class l{loadScript(e){if(Array.isArray(e))return o.call(this,e,this.loadScript);const t=r(this.scripts,e),i=!1===t?n(this.scripts,e):t;return"fulfilled"===i.state?(s(`Script ${e} already had been loaded.`),Promise.resolve(i)):("pending"===i.state||(i.promise=new Promise((t,r)=>{i.state="pending",(e=>{const t=document.createElement("script");return new Promise((s,r)=>{t.onerror=()=>{t.remove(),r(new Error("Failed to load script: "+e))},t.onload=()=>s(),document.head.appendChild(t),t.src=e})})(e).then(()=>{i.state="fulfilled",delete i.promise,s(`Script ${e} has been loaded.`),t(i)}).catch(e=>{i.state="rejected",delete i.promise,s(e.message||e),r(e)})})),i.promise)}loadCss(e){if(Array.isArray(e))return o.call(this,e,this.loadCss);const t=r(this.css,e),i=!1===t?n(this.css,e):t;return"fulfilled"===i.state?(s(`CSS ${e} already had been loaded.`),Promise.resolve(i)):("pending"===i.state||(i.promise=new Promise((t,r)=>{i.state="pending",(e=>{const t=document.createElement("link");return new Promise((s,r)=>{t.onerror=()=>{t.remove(),r(new Error("Failed to load CSS: "+e))},t.onload=()=>s(),t.rel="stylesheet",t.type="text/css",document.head.appendChild(t),t.href=e})})(e).then(()=>{i.state="fulfilled",delete i.promise,s(`CSS ${e} has been loaded.`),t(i)}).catch(e=>{i.state="rejected",delete i.promise,s(e.message||e),r(e)})})),i.promise)}loadPlugin(e){return new Promise((t,s)=>{this.loadCss(e.css).then(()=>this.loadScript(e.js)).then(()=>t()).catch(e=>s(e))})}constructor(){this.css=[],this.scripts=[]}}e.RM&&e.RM instanceof l||(e.RM=new l,document.addEventListener("DOMContentLoaded",()=>{s("Initializing Resource Manager..."),i("script","src",e.RM.scripts),e.RM.scripts.length&&s("Found JS scripts: "+e.RM.scripts.length),i('link[type="text/css"]',"href",e.RM.css),0!==e.RM.css.length&&s("Found CSS: "+e.RM.css.length)}))}(window);